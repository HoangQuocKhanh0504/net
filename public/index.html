<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Qu·∫£n l√Ω t√†i kho·∫£n</title>
<link rel="icon" href="GD.png" type="image/png">
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Roboto',sans-serif;background:linear-gradient(135deg,#1f4068,#2980b9);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;transition:background 0.3s,color 0.3s;}
body.dark{background:#1a1a1a;color:#eee;}
.hidden{display:none;}
#passGate{background:#fff;border-radius:20px;padding:40px;width:350px;text-align:center;box-shadow:0 15px 40px rgba(0,0,0,0.3);}
body.dark #passGate{background:#333;color:#eee;box-shadow:0 15px 40px rgba(0,0,0,0.7);}
#passGate h2{margin-bottom:25px;color:#1f4068;}
body.dark #passGate h2{color:#eee;}
#passGate input[type="password"]{width:100%;padding:12px;font-size:16px;border-radius:10px;border:1px solid #ccc;margin-bottom:20px;transition:all 0.3s ease;}
#passGate input:focus{border-color:#2980b9;box-shadow:0 0 8px rgba(41,128,185,0.5);outline:none;}
#passGate button{width:100%;padding:12px;font-size:16px;border:none;border-radius:10px;background:linear-gradient(90deg,#1f4068,#2980b9);color:white;cursor:pointer;transition:all 0.3s ease;}
#passGate button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,0.3);}
.container{width:100%;max-width:700px;background:#fff;border-radius:20px;padding:30px 40px;box-shadow:0 15px 40px rgba(0,0,0,0.2);transition:background 0.3s,color 0.3s;}
body.dark .container{background:#333;color:#eee;box-shadow:0 15px 40px rgba(0,0,0,0.7);}
.logo{width:80px;margin:0 auto 15px;display:block;}
h2{text-align:center;color:#1f4068;font-size:30px;margin-bottom:30px;}
body.dark h2{color:#eee;}
form{display:flex;flex-direction:column;gap:15px;margin-bottom:30px;}
input[type="text"], input[type="number"]{padding:14px;font-size:16px;border-radius:10px;border:1px solid #ccc;transition:all 0.3s ease;}
body.dark input[type="text"], body.dark input[type="number"]{background:#555;color:#eee;border:1px solid #888;}
input:focus{border-color:#2980b9;box-shadow:0 0 8px rgba(41,128,185,0.5);outline:none;}
button{padding:10px 16px;font-size:14px;border:none;border-radius:10px;background:linear-gradient(90deg,#1f4068,#2980b9);color:white;cursor:pointer;transition:all 0.3s ease;box-shadow:0 5px 15px rgba(0,0,0,0.2);margin-left:5px;}
button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,0.3);}
hr{border:none;height:1px;background:#ccc;margin:30px 0;}
ul{list-style:none;padding:0;margin:0;}
.user-card{display:flex;justify-content:space-between;align-items:center;background:#f7f7f7;padding:14px 18px;border-radius:15px;margin-bottom:12px;box-shadow:0 6px 15px rgba(0,0,0,0.1);transition:all 0.3s ease;}
body.dark .user-card{background:#444;color:#eee;box-shadow:0 6px 15px rgba(0,0,0,0.7);}
.user-card:hover{background:#e0f0ff;transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,0.2);}
.user-info{font-weight:500;font-size:16px;flex:1;}
.status{font-weight:600;margin-left:10px;}
.online{color:green;}
.offline{color:red;}
.btn-group{display:flex;gap:5px;}
.package-container{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px;}
.package-buttons{display:flex;flex-wrap:wrap;gap:10px;}
.package-buttons button{padding:10px 14px;border:none;border-radius:10px;background:linear-gradient(90deg,#1f4068,#2980b9);color:white;cursor:pointer;font-weight:500;box-shadow:0 5px 12px rgba(0,0,0,0.2);transition:all 0.3s;}
.package-buttons button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,0.3);}
.package-buttons button.selected{background:linear-gradient(90deg,#f39c12,#e74c3c);}
#customPrice{flex:1;padding:12px;border-radius:10px;border:1px solid #ccc;font-size:16px;}
body.dark #customPrice{background:#555;color:#eee;border:1px solid #888;}
#searchUser{width:100%;padding:12px;margin-bottom:15px;border-radius:10px;border:1px solid #ccc;font-size:16px;}
body.dark #searchUser{background:#555;color:#eee;border:1px solid #888;}
#overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);display:none;z-index:999;}
#popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:15px;padding:25px 30px;box-shadow:0 15px 40px rgba(0,0,0,0.3);min-width:300px;z-index:1000;display:none;flex-direction:column;align-items:center;}
body.dark #popup{background:#444;color:#eee;box-shadow:0 15px 40px rgba(0,0,0,0.7);}
#popup p{margin-bottom:10px;font-size:16px;color:#333;text-align:center;}
body.dark #popup p{color:#eee;}
#popup input{padding:8px;width:80%;margin-top:10px;border-radius:8px;border:1px solid #ccc;}
body.dark #popup input{background:#555;color:#eee;border:1px solid #888;}
#popup button{padding:8px 14px;border:none;border-radius:10px;background:#1f4068;color:white;cursor:pointer;margin:5;}
#popup button:hover{background:#2980b9;}
#popup #popupNote{margin-top:8px;color:#555;font-size:14px;}
body.dark #popup #popupNote{color:#ccc;}
#toggleDark{position:fixed;top:10px;right:10px;padding:8px 14px;background:#1f4068;color:white;border:none;border-radius:8px;cursor:pointer;z-index:1001;}
#toggleDark:hover{background:#2980b9;}
.popup-history{
    max-height:70vh;
    width:90%;
    max-width:600px;
    overflow:hidden;
}

#historyList{
    max-height:50vh;
    overflow-y:auto;
    margin-top:10px;
    width:100%;
}

.history-item{
    background:#f3f3f3;
    padding:10px;
    border-radius:10px;
    margin-bottom:8px;
    font-size:14px;
}

body.dark .history-item{
    background:#555;
}

.history-time{
    font-size:12px;
    opacity:0.7;
}
.auto-refresh{
    display:flex;
    align-items:center;
    gap:6px;
    font-size:14px;
    user-select:none;
}

.switch{
    position:relative;
    width:42px;
    height:22px;
}

.switch input{
    opacity:0;
    width:0;
    height:0;
}

.slider{
    position:absolute;
    cursor:pointer;
    inset:0;
    background:#ccc;
    border-radius:22px;
    transition:0.3s;
}

.slider::before{
    content:"";
    position:absolute;
    height:18px;
    width:18px;
    left:2px;
    bottom:2px;
    background:white;
    border-radius:50%;
    transition:0.3s;
}

.switch input:checked + .slider{
    background:#2980b9;
}

.switch input:checked + .slider::before{
    transform:translateX(20px);
}

/* Dark mode */
body.dark .slider{
    background:#555;
}

</style>
</head>
<body>

<button id="toggleDark">Toggle Dark Mode</button>

<div id="passGate">
    <h2>Nh·∫≠p m·∫≠t kh·∫©u</h2>
    <input type="password" id="passwordInput" placeholder="M·∫≠t kh·∫©u..." autofocus autocomplete="off">
    <button onclick="checkPass()">X√°c nh·∫≠n</button>
    <p id="errorMsg" style="color:red;margin-top:10px;"></p>
</div>

<div id="mainContent" class="hidden">
<div class="container">
    <img src="GD.png" alt="Logo GD" class="logo">
    <h2>Qu·∫£n l√Ω t√†i kho·∫£n</h2>

    <form id="form">
        <input type="text" id="username" placeholder="Username" autocomplete="off" required>
        <input type="text" id="password" placeholder="Password" autocomplete="off" required>
        <div class="package-container">
            <div class="package-buttons">
                <button type="button" data-price="5000">5.000‚Ç´</button>
                <button type="button" data-price="10000">10.000‚Ç´</button>
                <button type="button" data-price="20000">20.000‚Ç´</button>
                <button type="button" data-price="50000">50.000‚Ç´</button>
                <button type="button" data-price="100000">100.000‚Ç´</button>
                <button type="button" data-price="200000">200.000‚Ç´</button>
                <button type="button" data-price="500000">500.000‚Ç´</button>
                <button type="button" data-price="1000000">1.000.000‚Ç´</button>
                <button type="button" data-price="2000000">2.000.000‚Ç´</button>
                <button type="button" data-price="5000000">5.000.000‚Ç´</button>
            </div>
            <input type="number" id="customPrice" placeholder="Ho·∫∑c nh·∫≠p s·ªë ti·ªÅn..." min="5000" autocomplete="off">
            <button type="submit">T·∫°o t√†i kho·∫£n</button>
        </div>
    </form>

    <hr>

<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
    <h3>Danh s√°ch User</h3>

    <div style="display:flex;align-items:center;gap:10px;">
        <button id="historyBtn">üìú L·ªãch s·ª≠</button>
        <button id="refreshUsers">üîÑ L√†m m·ªõi</button>

        <div class="auto-refresh">
            <span>Auto</span>
            <label class="switch">
                <input type="checkbox" id="autoRefresh">
                <span class="slider"></span>
            </label>
        </div>
    </div>
</div>


<input type="text" id="searchUser" placeholder="T√¨m ki·∫øm user..." autocomplete="off">
<ul id="userList"></ul>

</div>
</div>

<div id="overlay"></div>
<div id="popup"></div>

<script>
const HISTORY_KEY = "action_history";

function addHistory(action, username, detail=""){
    const history = JSON.parse(localStorage.getItem(HISTORY_KEY) || "[]");

    history.unshift({
        time: new Date().toLocaleString(),
        action,
        username,
        detail
    });

    localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
}

function getHistory(){
    return JSON.parse(localStorage.getItem(HISTORY_KEY) || "[]");
}

    document.getElementById("historyBtn").onclick = openHistoryPopup;

function openHistoryPopup(){
    popup.className = "popup-history"; // üëà th√™m d√≤ng n√†y
    popup.innerHTML = `
        <h3>L·ªãch s·ª≠ thao t√°c</h3>
        <input type="text" id="historySearch" placeholder="T√¨m theo username..."
            style="width:100%;margin-top:10px;padding:8px;border-radius:8px;border:1px solid #ccc">
        <div id="historyList"></div>
        <button style="margin-top:10px" onclick="closePopup()">ƒê√≥ng</button>
    `;
    popup.style.display="flex";
    overlay.style.display="block";

    renderHistory();
    document.getElementById("historySearch").addEventListener("input", renderHistory);
}

function renderHistory(){
    const list = document.getElementById("historyList");
    const keyword = document.getElementById("historySearch").value.toLowerCase();
    const history = getHistory();

    list.innerHTML = "";

    history
        .filter(h => h.username.toLowerCase().includes(keyword))
        .forEach(h=>{
            const div = document.createElement("div");
            div.className = "history-item";
            div.innerHTML = `
                <b>${h.username}</b> ‚Äì ${h.action}<br>
                ${h.detail ? `<i>${h.detail}</i><br>` : ""}
                <span class="history-time">${h.time}</span>
            `;
            list.appendChild(div);
        });

    if(!list.innerHTML){
        list.innerHTML = "<p style='opacity:0.6'>Kh√¥ng c√≥ d·ªØ li·ªáu</p>";
    }
}

    document.getElementById("refreshUsers").onclick = async ()=>{
    const btn = document.getElementById("refreshUsers");
    btn.disabled = true;
    btn.textContent = "‚è≥ ƒêang t·∫£i...";

    await loadUsers();

    btn.textContent = "üîÑ L√†m m·ªõi";
    btn.disabled = false;
};

   const localUsers = {};
 
const correctPass = "khanhpc5408";
const popup = document.getElementById("popup");
const overlay = document.getElementById("overlay");
const toggleDarkBtn = document.getElementById("toggleDark");

// Dark mode
if(localStorage.getItem("darkMode") === "true") document.body.classList.add("dark");
toggleDarkBtn.onclick = ()=>{
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode", document.body.classList.contains("dark"));
}

// LOGIN
function checkPass(){
    const input = document.getElementById("passwordInput").value;
    const errorMsg = document.getElementById("errorMsg");
    if(input === correctPass){
        document.getElementById("passGate").classList.add("hidden");
        document.getElementById("mainContent").classList.remove("hidden");
        loadUsers();
    } else {
        errorMsg.textContent = "M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng!";
    }
}

// ƒê√ìNG POPUP
function closePopup(){
    popup.style.display="none";
    overlay.style.display="none";
    popup.className = ""; // üëà reset
}


// CHUY·ªÇN PH√öT SANG HH:MM:SS
function formatTimeFromMinutes(mins){
    const h = Math.floor(mins/60);
    const m = mins % 60;
    const s = 0;
    return `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
}

// FORMAT TIME T·ª™ GI√ÇY
function formatTime(seconds){
    const h = Math.floor(seconds / 3600);
    const m = Math.floor((seconds % 3600) / 60);
    const s = seconds % 60;

    return (
        String(h).padStart(2,'0') + ":" +
        String(m).padStart(2,'0') + ":" +
        String(s).padStart(2,'0')
    );
}
function getDisplaySeconds(username){
    const u = localUsers[username];
    if(!u) return 0;

    const passed = Math.floor((Date.now() - u.lastSync) / 1000);
    return Math.max(u.secondsAtSync - passed, 0);
}


// POPUP N·∫†P TI·ªÄN
function inputPopup(msg, callback){
    popup.innerHTML = `
        <p>${msg}</p>
        <input type="number" id="popupInput" placeholder="Nh·∫≠p s·ªë ph√∫t...">
        <p id="popupNote">00:00:00 = 0‚Ç´</p>
        <div style="margin-top:10px;">
            <button id="okBtn">OK</button>
            <button id="cancelBtn">H·ªßy</button>
        </div>
    `;
    popup.style.display="flex";
    overlay.style.display="block";

    const input = document.getElementById("popupInput");
    const note = document.getElementById("popupNote");

    input.addEventListener("input", ()=>{
        const minutes = parseInt(input.value);
        if(isNaN(minutes) || minutes <= 0){
            note.textContent = "00:00:00 = 0‚Ç´";
        } else {
            const price = Math.ceil(minutes / 60 * 5000);
            note.textContent = `${formatTimeFromMinutes(minutes)} = ${price.toLocaleString()}‚Ç´`;
        }
    });

    document.getElementById("okBtn").onclick = ()=>{
        const val = parseInt(input.value);
        closePopup();
        callback(val);
    };
    document.getElementById("cancelBtn").onclick = closePopup;
}

// POPUP ƒê·∫∂T M·∫¨T KH·∫®U
function passwordPopup(msg, callback){
    popup.innerHTML = `
        <p>${msg}</p>
        <input type="password" id="popupInput" placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi...">
        <div style="margin-top:10px;">
            <button id="okBtn">OK</button>
            <button id="cancelBtn">H·ªßy</button>
        </div>
    `;
    popup.style.display="flex";
    overlay.style.display="block";

    const input = document.getElementById("popupInput");
    document.getElementById("okBtn").onclick = () => { closePopup(); callback(input.value); };
    document.getElementById("cancelBtn").onclick = closePopup;
}

// POPUP X√ÅC NH·∫¨N
function confirmPopup(msg, callback){
    popup.innerHTML = `
        <p>${msg}</p>
        <div style="margin-top:10px;">
            <button id="yesBtn">Yes</button>
            <button id="noBtn">H·ªßy</button>
        </div>
    `;
    popup.style.display="flex";
    overlay.style.display="block";
    document.getElementById("yesBtn").onclick = ()=>{ closePopup(); callback(true); };
    document.getElementById("noBtn").onclick = ()=>{ closePopup(); callback(false); };
}

// POPUP ALERT
function alertPopup(msg){
    popup.innerHTML = `
        <p>${msg}</p>
        <div style="margin-top:10px;">
            <button id="closeBtn">OK</button>
        </div>
    `;
    popup.style.display="flex";
    overlay.style.display="block";
    document.getElementById("closeBtn").onclick = closePopup;
}

// PACKAGE BUTTONS
const packageBtns = document.querySelectorAll(".package-buttons button");
const customPrice = document.getElementById("customPrice");
packageBtns.forEach(btn=>{
    btn.addEventListener("click", ()=>{
        packageBtns.forEach(b=>b.classList.remove("selected"));
        btn.classList.add("selected");
        customPrice.value = btn.dataset.price;
    });
});
customPrice.addEventListener("input", ()=>{ packageBtns.forEach(b=>b.classList.remove("selected")); });

// FORM T·∫†O USER
const form = document.getElementById("form");
form.addEventListener("submit", async e=>{
    e.preventDefault();
    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;
    let money = parseInt(customPrice.value);
    if(isNaN(money) || money<5000) money = 5000;
    const minutes = (money/5000)*60;
    const res = await fetch("/api/add_user",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({username,password,minutes})
    });
    const data = await res.json();
    alertPopup(data.success?"T·∫°o th√†nh c√¥ng":data.msg);
    if(data.success){
    addHistory("T·∫°o t√†i kho·∫£n", username, `N·∫°p ${money.toLocaleString()}‚Ç´`);
}

    loadUsers();
    
});

// LOAD USERS
async function loadUsers(){
    const res = await fetch("/api/list_users");
    const users = await res.json();
    const list = document.getElementById("userList");

    // ƒê√°nh d·∫•u user ƒëang t·ªìn t·∫°i
    const aliveIds = new Set();

    users.forEach(u=>{
        const id = `user-${u.username}`;
        aliveIds.add(id);

        if(u.seconds <= 0) u.status = "offline";

        let li = document.getElementById(id);

        // ======================
        // T·∫†O USER M·ªöI
        // ======================
        if(!li){
            li = document.createElement("li");
            li.id = id;
            li.className = "user-card";

            // INFO
            const info = document.createElement("span");
            info.className = "user-info";
            info.innerHTML = `
                ${u.username} -
                <span class="user-time">${formatTime(u.seconds)}</span>
                <span class="status ${u.status}">${u.status}</span>
            `;
            li.appendChild(info);

            // BUTTON GROUP
            const btnGroup = document.createElement("div");
            btnGroup.className = "btn-group";

            // N·∫†P TH√äM
            const addBtn = document.createElement("button");
            addBtn.textContent = "N·∫°p th√™m";
            addBtn.onclick = ()=>inputPopup(
                "Nh·∫≠p s·ªë ph√∫t mu·ªën n·∫°p:",
                async minutes=>{
                    if(!minutes || minutes<=0) return;
                    const r = await fetch("/api/add_time",{
                        method:"POST",
                        headers:{"Content-Type":"application/json"},
                        body:JSON.stringify({ username:u.username, minutes })
                    });
                    const d = await r.json();
                    alertPopup(d.success?"N·∫°p th√†nh c√¥ng":d.msg);
                    if(d.success){
    addHistory("N·∫°p ti·ªÅn", u.username, `+ ${minutes} ph√∫t`);
}

                    loadUsers();
                }
            );
            btnGroup.appendChild(addBtn);

            // RESET PASS
            const resetBtn = document.createElement("button");
            resetBtn.textContent = "ƒê·∫∑t l·∫°i pass";
            resetBtn.onclick = ()=>passwordPopup(
                "Nh·∫≠p m·∫≠t kh·∫©u m·ªõi:",
                async newPass=>{
                    if(!newPass) return;
                    const r = await fetch("/api/reset_password",{
                        method:"POST",
                        headers:{"Content-Type":"application/json"},
                        body:JSON.stringify({ username:u.username, password:newPass })
                    });
                    const d = await r.json();
                    alertPopup(d.success?"ƒê·ªïi m·∫≠t kh·∫©u OK":d.msg);
                    if(d.success){
    addHistory("ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u", u.username);
}

                }
            );
            btnGroup.appendChild(resetBtn);

            // X√ìA USER
            const delBtn = document.createElement("button");
            delBtn.textContent = "X√≥a";
            delBtn.onclick = ()=>confirmPopup(
                `X√≥a user ${u.username}?`,
                async ok=>{
                    if(!ok) return;
                    const r = await fetch("/api/delete_user",{
                        method:"POST",
                        headers:{"Content-Type":"application/json"},
                        body:JSON.stringify({ username:u.username })
                    });
                    const d = await r.json();
                    alertPopup(d.success?"ƒê√£ x√≥a":d.msg);
                    if(d.success){
    addHistory("X√≥a t√†i kho·∫£n", u.username);
}

                    li.remove();
                    
                }
            );
            btnGroup.appendChild(delBtn);

            // T√çNH TI·ªÄN
            const payBtn = document.createElement("button");
            payBtn.textContent = "T√≠nh ti·ªÅn";
            payBtn.onclick = ()=>{
                const total = u.totalSeconds ?? u.seconds;
                const used = total - u.seconds;
                const money = Math.round(used * (5000/3600));
                addHistory("T√≠nh ti·ªÅn", u.username, `${money.toLocaleString()}‚Ç´`);

                alertPopup(
                    `ƒê√£ d√πng: ${formatTime(used)}<br>
                     Ti·ªÅn: ${money.toLocaleString()}‚Ç´`
                );
            };
            btnGroup.appendChild(payBtn);

            li.appendChild(btnGroup);
            list.appendChild(li);
        }

        // ======================
        // UPDATE USER C≈®
        // ======================
        li.querySelector(".user-time").textContent = formatTime(u.seconds);

        const status = li.querySelector(".status");
        status.textContent = u.status;
        status.className = `status ${u.status}`;
    });

    // ======================
    // REMOVE USER ƒê√É B·ªä X√ìA
    // ======================
    [...list.children].forEach(li=>{
        if(!aliveIds.has(li.id)) li.remove();
    });

    filterUsers();
}



// T√åM KI·∫æM
const searchInput=document.getElementById("searchUser");
searchInput.addEventListener("input",filterUsers);
function filterUsers(){
    const filter=searchInput.value.toLowerCase();
    document.querySelectorAll("#userList .user-card").forEach(card=>{
        const username=card.querySelector(".user-info").textContent.toLowerCase();
        card.style.display=username.includes(filter)?"flex":"none";
    });
}

// AUTO LOAD M·ªñI GI√ÇY
setInterval(()=>{
    Object.keys(localUsers).forEach(username=>{
        const li = document.getElementById(`user-${username}`);
        if(!li) return;

        li.querySelector(".user-time").textContent =
            formatTime(getDisplaySeconds(username));
    });
},1000);
let autoRefreshTimer = null;
const autoRefreshCheckbox = document.getElementById("autoRefresh");

// kh√¥i ph·ª•c tr·∫°ng th√°i ƒë√£ l∆∞u
if(localStorage.getItem("autoRefresh") === "true"){
    autoRefreshCheckbox.checked = true;
    startAutoRefresh();
}

autoRefreshCheckbox.addEventListener("change", ()=>{
    if(autoRefreshCheckbox.checked){
        startAutoRefresh();
        localStorage.setItem("autoRefresh","true");
    }else{
        stopAutoRefresh();
        localStorage.setItem("autoRefresh","false");
    }
});

function startAutoRefresh(){
    if(autoRefreshTimer) return; // tr√°nh ch·∫°y ch·ªìng
    autoRefreshTimer = setInterval(()=>{
        document.getElementById("refreshUsers").click();
    }, 5000); // 5 gi√¢y / l·∫ßn (mu·ªën nhanh h∆°n th√¨ ch·ªânh)
}

function stopAutoRefresh(){
    clearInterval(autoRefreshTimer);
    autoRefreshTimer = null;
}

</script>
</body>
</html>
